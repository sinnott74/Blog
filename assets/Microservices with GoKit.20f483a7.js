import{j as s}from"./jsx-runtime.7a5a6aec.js";import{u as o}from"./index.d82828d2.js";import"./vendor.76997228.js";const i="Microservices with GoKit",l="Daniel Sinnott",x="https://i.imgur.com/4Ep7VSO.png",u=26,d=["Technical","Microservices","Golang","GoKit"],h="Fri, 2nd Nov 2018",m=new Date(1541190472341);function k(e={}){const{wrapper:t}=Object.assign({},o(),e.components);return t?s.exports.jsx(t,Object.assign({},e,{children:s.exports.jsx(a,{})})):a();function a(){const n=Object.assign({h2:"h2",h3:"h3",p:"p",a:"a",ul:"ul",li:"li",h4:"h4",pre:"pre",code:"code",span:"span"},o(),e.components);return s.exports.jsxs(s.exports.Fragment,{children:[s.exports.jsx(n.h2,{children:"Todo Microservice"}),`
`,s.exports.jsx(n.h3,{children:"Go"}),`
`,s.exports.jsxs(n.p,{children:[s.exports.jsx(n.a,{href:"https://golang.org/",children:"Golang"})," is the perfect language to use for microservices."]}),`
`,s.exports.jsxs(n.ul,{children:[`
`,s.exports.jsx(n.li,{children:"It compiles to a single binary, making deployment a breeze."}),`
`,s.exports.jsx(n.li,{children:"It has incredibly low runtime memory."}),`
`,s.exports.jsx(n.li,{children:"C & C++ like performance with built in concurrency primitives."}),`
`,s.exports.jsx(n.li,{children:`Its standard library supports request cancellation and timeout propagation. Which means less cpu
cycles if a user cancels or if something is taking too long.`}),`
`,s.exports.jsx(n.li,{children:"Both Docker & Kubernetes are written in Go."}),`
`]}),`
`,s.exports.jsx(n.h4,{children:"Installation"}),`
`,s.exports.jsxs(n.p,{children:["To install Go, follow the instruction for your platform here: ",s.exports.jsx(n.a,{href:"https://golang.org/doc/install",children:"Go Installation"})]}),`
`,s.exports.jsx(n.h3,{children:"GoKit"}),`
`,s.exports.jsxs(n.p,{children:[s.exports.jsx(n.a,{href:"https://gokit.io/",children:"GoKit"}),` is a lightly opinionated microservice toolkit. It allows developers to focus on writing the
business logic of their service and plug in transport protocols such as http or gRPC etc, service
discovery, logging and metrics.`]}),`
`,s.exports.jsxs(n.p,{children:[`Its been criticised for the amount of boilerplate code that needs to be written, and it is quite
daunting on first impression, but this verbosity allows for greater control in the long run. If
you're new to GoKit its worth checking out the `,s.exports.jsx(n.a,{href:"https://gokit.io/examples/stringsvc.html",children:"stringsvc example"}),"."]}),`
`,s.exports.jsx(n.h4,{children:"Installation"}),`
`,s.exports.jsx(n.p,{children:"GoKit can be installed using Go's idiomatic library installation command:"}),`
`,s.exports.jsx(n.pre,{className:"language-go",children:s.exports.jsxs(n.code,{className:"language-go",children:[s.exports.jsx(n.span,{className:"token keyword",children:"go"})," get github",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"com",s.exports.jsx(n.span,{className:"token operator",children:"/"}),s.exports.jsx(n.span,{className:"token keyword",children:"go"}),s.exports.jsx(n.span,{className:"token operator",children:"-"}),"kit",s.exports.jsx(n.span,{className:"token operator",children:"/"}),`kit
`]})}),`
`,s.exports.jsx(n.h3,{children:"Business Logic"}),`
`,s.exports.jsx(n.h4,{children:"Our Todo"}),`
`,s.exports.jsxs(n.p,{children:["Create a file ",s.exports.jsx(n.code,{children:"model.go"})," to define our Todo. Our ",s.exports.jsx(n.code,{children:"Todo"}),` is can be simply modelled like below. Feel
free to add whatever attributes you'd like. We're using Struct tags to define what each Todo
attribute will be named when its converted to JSON. The built in JSON encoder will use reflection to
look for these tags, otherwise it'll use the attribute name as its defined in Go.`]}),`
`,s.exports.jsx(n.pre,{className:"language-go",children:s.exports.jsxs(n.code,{className:"language-go",children:[s.exports.jsx(n.span,{className:"token comment",children:"// model.go"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"package"}),` todo

`,s.exports.jsx(n.span,{className:"token keyword",children:"import"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"time"'}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// Todo model"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," Todo ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	ID        `,s.exports.jsx(n.span,{className:"token builtin",children:"string"}),"    ",s.exports.jsx(n.span,{className:"token string",children:'`json:"id"`'}),`
	Username  `,s.exports.jsx(n.span,{className:"token builtin",children:"string"}),"    ",s.exports.jsx(n.span,{className:"token string",children:'`json:"username"`'}),`
	Text      `,s.exports.jsx(n.span,{className:"token builtin",children:"string"}),"    ",s.exports.jsx(n.span,{className:"token string",children:'`json:"text"`'}),`
	Completed `,s.exports.jsx(n.span,{className:"token builtin",children:"bool"}),"      ",s.exports.jsx(n.span,{className:"token string",children:'`json:"completed"`'}),`
	CreatedOn time`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Time ",s.exports.jsx(n.span,{className:"token string",children:'`json:"created_on"`'}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`]})}),`
`,s.exports.jsx(n.h4,{children:"Define our service"}),`
`,s.exports.jsxs(n.p,{children:["Create a file ",s.exports.jsx(n.code,{children:"service.go"}),`. This is going to contain our business logic. Its going to be a single
InMemory CRUD Todo service. First we'll define an interface for our service. This will allow us to
easily swap out the implementation later if we want to, for example, store our Todos in a
database/datastore.`]}),`
`,s.exports.jsx(n.p,{children:"Our Todo service is a basically a CRUD service for Todos."}),`
`,s.exports.jsx(n.pre,{className:"language-go",children:s.exports.jsxs(n.code,{className:"language-go",children:[s.exports.jsx(n.span,{className:"token comment",children:"// service.go"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"package"}),` todo

`,s.exports.jsx(n.span,{className:"token keyword",children:"import"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"context"'}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// TodoService for Todos"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," TodoService ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token function",children:"GetAllForUser"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," username ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:"["}),s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token function",children:"GetByID"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," id ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token function",children:"Add"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," todo Todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token function",children:"Update"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," id ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," todo Todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),`
	`,s.exports.jsx(n.span,{className:"token function",children:"Delete"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," id ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
`]})}),`
`,s.exports.jsx(n.h4,{children:"Implementation"}),`
`,s.exports.jsx(n.p,{children:`Next, we'll implement our service using an InMemory datastore. Go uses duck typing, so If it walks
like a duck and it quacks like a duck, then it must be a duck. There's no need to explicitly say
we're implementing the interface, e.g. Java.`}),`
`,s.exports.jsxs(n.p,{children:["We'll added a ",s.exports.jsx(n.code,{children:"RWMutex"}),` to lock the map and prevent concurrent access from multiple threads. The
constructor function `,s.exports.jsx(n.code,{children:"NewInmemTodoService"})," instantiates our service."]}),`
`,s.exports.jsx(n.pre,{className:"language-go",children:s.exports.jsxs(n.code,{className:"language-go",children:[s.exports.jsx(n.span,{className:"token comment",children:"// service.go"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"package"}),` todo

`,s.exports.jsx(n.span,{className:"token keyword",children:"import"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"context"'}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"errors"'}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"math/rand"'}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"sync"'}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"time"'}),`

	`,s.exports.jsx(n.span,{className:"token string",children:'"github.com/rs/xid"'}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// TodoService for Todos"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," TodoService ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token function",children:"GetAllForUser"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," username ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:"["}),s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token function",children:"GetByID"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," id ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token function",children:"Add"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," todo Todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token function",children:"Update"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," id ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," todo Todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),`
	`,s.exports.jsx(n.span,{className:"token function",children:"Delete"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," id ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// *** Implementation ***"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"var"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
	`,s.exports.jsx(n.span,{className:"token comment",children:"// ErrInconsistentIDs is when the ID of the Entity you are updating differs from the ID given"}),`
	ErrInconsistentIDs `,s.exports.jsx(n.span,{className:"token operator",children:"="})," errors",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"New"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"Inconsistent IDs"'}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token comment",children:"// ErrNotFound is when the Entity doesn't exist"}),`
	ErrNotFound `,s.exports.jsx(n.span,{className:"token operator",children:"="})," errors",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"New"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"Not found"'}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// NewInmemTodoService creates an in memory Todo service"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"NewInmemTodoService"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," TodoService ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	s `,s.exports.jsx(n.span,{className:"token operator",children:":="})," ",s.exports.jsx(n.span,{className:"token operator",children:"&"}),"inmemService",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		m`,s.exports.jsx(n.span,{className:"token punctuation",children:":"})," ",s.exports.jsx(n.span,{className:"token keyword",children:"map"}),s.exports.jsx(n.span,{className:"token punctuation",children:"["}),s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
	rand`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Seed"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"time",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Now"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"UnixNano"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"}),` s
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// inmemService is a In Memory implementation of the service"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," inmemService ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	sync`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),`RWMutex
	m `,s.exports.jsx(n.span,{className:"token keyword",children:"map"}),s.exports.jsx(n.span,{className:"token punctuation",children:"["}),s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),`Todo
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// GetAllForUser gets Todos from memory for a user"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s ",s.exports.jsx(n.span,{className:"token operator",children:"*"}),"inmemService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token function",children:"GetAllForUser"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," username ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:"["}),s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	s`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"RLock"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"defer"})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"RUnlock"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	todos `,s.exports.jsx(n.span,{className:"token operator",children:":="})," ",s.exports.jsx(n.span,{className:"token function",children:"make"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:"["}),s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token number",children:"0"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token function",children:"len"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"m",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"for"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"_"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," todo ",s.exports.jsx(n.span,{className:"token operator",children:":="})," ",s.exports.jsx(n.span,{className:"token keyword",children:"range"})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"m ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," todo",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Username ",s.exports.jsx(n.span,{className:"token operator",children:"=="})," username ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
			todos `,s.exports.jsx(n.span,{className:"token operator",children:"="})," ",s.exports.jsx(n.span,{className:"token function",children:"append"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"todos",s.exports.jsx(n.span,{className:"token punctuation",children:","})," todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," todos",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// Get an Todos from the database"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s ",s.exports.jsx(n.span,{className:"token operator",children:"*"}),"inmemService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token function",children:"GetByID"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," id ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	s`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Lock"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"defer"})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Unlock"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ok ",s.exports.jsx(n.span,{className:"token operator",children:":="})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"m",s.exports.jsx(n.span,{className:"token punctuation",children:"["}),"id",s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),s.exports.jsx(n.span,{className:"token punctuation",children:";"})," ok ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," Todo",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` ErrNotFound
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// Add a Todo to memory"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s ",s.exports.jsx(n.span,{className:"token operator",children:"*"}),"inmemService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token function",children:"Add"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," todo Todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	s`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Lock"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"defer"})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Unlock"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	todo`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ID ",s.exports.jsx(n.span,{className:"token operator",children:"="})," xid",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"New"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"String"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	todo`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"CreatedOn ",s.exports.jsx(n.span,{className:"token operator",children:"="})," time",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Now"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	s`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"m",s.exports.jsx(n.span,{className:"token punctuation",children:"["}),"todo",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ID",s.exports.jsx(n.span,{className:"token punctuation",children:"]"})," ",s.exports.jsx(n.span,{className:"token operator",children:"="}),` todo
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," todo",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// Update a Todo in memory"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s ",s.exports.jsx(n.span,{className:"token operator",children:"*"}),"inmemService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token function",children:"Update"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," id ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," todo Todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	s`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Lock"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"defer"})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Unlock"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," id ",s.exports.jsx(n.span,{className:"token operator",children:"!="})," todo",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ID ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"}),` ErrInconsistentIDs
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"_"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," ok ",s.exports.jsx(n.span,{className:"token operator",children:":="})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"m",s.exports.jsx(n.span,{className:"token punctuation",children:"["}),"id",s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),s.exports.jsx(n.span,{className:"token punctuation",children:";"})," ",s.exports.jsx(n.span,{className:"token operator",children:"!"}),"ok ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"}),` ErrNotFound
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

	s`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"m",s.exports.jsx(n.span,{className:"token punctuation",children:"["}),"todo",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ID",s.exports.jsx(n.span,{className:"token punctuation",children:"]"})," ",s.exports.jsx(n.span,{className:"token operator",children:"="}),` todo
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// Delete a Todo from memory"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s ",s.exports.jsx(n.span,{className:"token operator",children:"*"}),"inmemService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token function",children:"Delete"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," id ",s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	s`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Lock"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"defer"})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Unlock"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"_"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," ok ",s.exports.jsx(n.span,{className:"token operator",children:":="})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"m",s.exports.jsx(n.span,{className:"token punctuation",children:"["}),"id",s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),s.exports.jsx(n.span,{className:"token punctuation",children:";"})," ",s.exports.jsx(n.span,{className:"token operator",children:"!"}),"ok ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"}),` ErrNotFound
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

	`,s.exports.jsx(n.span,{className:"token function",children:"delete"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"m",s.exports.jsx(n.span,{className:"token punctuation",children:","})," id",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`]})}),`
`,s.exports.jsx(n.h3,{children:"Endpoints"}),`
`,s.exports.jsxs(n.p,{children:[s.exports.jsx(n.code,{children:"Endpoints"}),` are our first interaction with GoKit. Each interaction with the microservice will be
through an Endpoint. GoKit provides pluggable transport layers out of the box which know how to
interact with Endpoints.`]}),`
`,s.exports.jsx(n.p,{children:`Endpoints have a simple definition. They take in a context and a request, and return a response and
an error.`}),`
`,s.exports.jsx(n.pre,{className:"language-go",children:s.exports.jsxs(n.code,{className:"language-go",children:[s.exports.jsx(n.span,{className:"token keyword",children:"type"})," Endpoint ",s.exports.jsx(n.span,{className:"token keyword",children:"func"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"response ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," err ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
`]})}),`
`,s.exports.jsx(n.p,{children:`Each method of our service needs to be wrapped in an endpoint. Endpoints force us to explicitly
write what the inputs and outputs of our microservice will look like.`}),`
`,s.exports.jsxs(n.p,{children:["You may notice that ",s.exports.jsx(n.code,{children:"MakeTodoEndpoints"})," constructor function takes in our ",s.exports.jsx(n.code,{children:"TodoService"}),`. Best
practices for a GoKit microservice are to use Clean/Hexagonal architectural pattern, where each
layer can only wraps and only know about the layers within them.`]}),`
`,s.exports.jsx(n.pre,{className:"language-go",children:s.exports.jsxs(n.code,{className:"language-go",children:[s.exports.jsx(n.span,{className:"token comment",children:"// endpoint.go"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"package"}),` todo

`,s.exports.jsx(n.span,{className:"token keyword",children:"import"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"context"'}),`

	`,s.exports.jsx(n.span,{className:"token string",children:'"github.com/go-kit/kit/endpoint"'}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// Endpoints collects all endpoints which compose the Todo service"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," TodoEndpoints ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	GetAllForUserEndPoint endpoint`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),`Endpoint
	GetByIDEndpoint       endpoint`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),`Endpoint
	AddEndpoint           endpoint`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),`Endpoint
	UpdateEndpoint        endpoint`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),`Endpoint
	DeleteEndpoint        endpoint`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),`Endpoint
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// MakeTodoEndpoints returns an Endpoints struct where each endpoint invokes"}),`
`,s.exports.jsx(n.span,{className:"token comment",children:"// the corresponding method on the provided Todo"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"MakeTodoEndpoints"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s TodoService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," TodoEndpoints ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," TodoEndpoints",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		GetAllForUserEndPoint`,s.exports.jsx(n.span,{className:"token punctuation",children:":"})," ",s.exports.jsx(n.span,{className:"token function",children:"MakeGetAllForUserEndpoint"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		GetByIDEndpoint`,s.exports.jsx(n.span,{className:"token punctuation",children:":"}),"       ",s.exports.jsx(n.span,{className:"token function",children:"MakeGetByIDEndpoint"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		AddEndpoint`,s.exports.jsx(n.span,{className:"token punctuation",children:":"}),"           ",s.exports.jsx(n.span,{className:"token function",children:"MakeAddEndpoint"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		UpdateEndpoint`,s.exports.jsx(n.span,{className:"token punctuation",children:":"}),"        ",s.exports.jsx(n.span,{className:"token function",children:"MakeUpdateEndpoint"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		DeleteEndpoint`,s.exports.jsx(n.span,{className:"token punctuation",children:":"}),"        ",s.exports.jsx(n.span,{className:"token function",children:"MakeDeleteEndpoint"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," GetAllForUserRequest ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," GetAllForUserResponse ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	Todos `,s.exports.jsx(n.span,{className:"token punctuation",children:"["}),s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),"Todo ",s.exports.jsx(n.span,{className:"token string",children:'`json:"todos"`'}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"MakeGetAllForUserEndpoint"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s TodoService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," endpoint",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Endpoint ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token keyword",children:"func"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		username `,s.exports.jsx(n.span,{className:"token operator",children:":="})," ctx",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Value"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"username"'}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		todos`,s.exports.jsx(n.span,{className:"token punctuation",children:","})," err ",s.exports.jsx(n.span,{className:"token operator",children:":="})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"GetAllForUser"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx",s.exports.jsx(n.span,{className:"token punctuation",children:","})," username",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," GetAllForUserResponse",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),"todos",s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," GetByIDRequest ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	ID `,s.exports.jsx(n.span,{className:"token builtin",children:"string"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," GetByIDResponse ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	Todo Todo `,s.exports.jsx(n.span,{className:"token string",children:'`json:"todo"`'}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"MakeGetByIDEndpoint"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s TodoService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," endpoint",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Endpoint ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token keyword",children:"func"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		req `,s.exports.jsx(n.span,{className:"token operator",children:":="})," request",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"GetByIDRequest",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		todo`,s.exports.jsx(n.span,{className:"token punctuation",children:","})," err ",s.exports.jsx(n.span,{className:"token operator",children:":="})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"GetByID"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx",s.exports.jsx(n.span,{className:"token punctuation",children:","})," req",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ID",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," GetByIDResponse",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),"todo",s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," AddRequest ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	Todo Todo
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," AddResponse ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	Todo Todo `,s.exports.jsx(n.span,{className:"token string",children:'`json:"todo"`'}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"MakeAddEndpoint"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s TodoService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," endpoint",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Endpoint ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token keyword",children:"func"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		req `,s.exports.jsx(n.span,{className:"token operator",children:":="})," request",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"AddRequest",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		todo`,s.exports.jsx(n.span,{className:"token punctuation",children:","})," err ",s.exports.jsx(n.span,{className:"token operator",children:":="})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Add"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx",s.exports.jsx(n.span,{className:"token punctuation",children:","})," req",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," AddResponse",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),"todo",s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," UpdateRequest ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	ID   `,s.exports.jsx(n.span,{className:"token builtin",children:"string"}),`
	Todo Todo
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," UpdateResponse ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"MakeUpdateEndpoint"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s TodoService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," endpoint",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Endpoint ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token keyword",children:"func"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		req `,s.exports.jsx(n.span,{className:"token operator",children:":="})," request",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"UpdateRequest",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		err `,s.exports.jsx(n.span,{className:"token operator",children:":="})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Update"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx",s.exports.jsx(n.span,{className:"token punctuation",children:","})," req",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ID",s.exports.jsx(n.span,{className:"token punctuation",children:","})," req",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," UpdateResponse",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," DeleteRequest ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	ID `,s.exports.jsx(n.span,{className:"token builtin",children:"string"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"type"})," DeleteResponse ",s.exports.jsx(n.span,{className:"token keyword",children:"struct"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"MakeDeleteEndpoint"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"s TodoService",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," endpoint",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Endpoint ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token keyword",children:"func"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		req `,s.exports.jsx(n.span,{className:"token operator",children:":="})," request",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"DeleteRequest",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		err `,s.exports.jsx(n.span,{className:"token operator",children:":="})," s",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Delete"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx",s.exports.jsx(n.span,{className:"token punctuation",children:","})," req",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ID",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," DeleteResponse",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`]})}),`
`,s.exports.jsx(n.h3,{children:"Transport Layer"}),`
`,s.exports.jsxs(n.p,{children:["The ",s.exports.jsx(n.code,{children:"transport.go"}),` is responsible for converting a transport layer request into an endpoint call.
For this tutorial we're using `,s.exports.jsx(n.code,{children:"HTTP"}),` as our transport protocol, but we could as easily use something
like `,s.exports.jsx(n.code,{children:"gRPC"}),". Go-Kit provides support for ",s.exports.jsx(n.code,{children:"Http"}),", ",s.exports.jsx(n.code,{children:"gRPC"}),", ",s.exports.jsx(n.code,{children:"NATs"})," and ",s.exports.jsx(n.code,{children:"Thrift"}),` out of the box, but
it's relatively simple to add support for other protocols.`]}),`
`,s.exports.jsxs(n.p,{children:["Our ",s.exports.jsx(n.code,{children:"transport.go"}),` is responsible for handling everything to do with http, like creating a route for
each service method or decoding any parameters. We're using great http routing library `,s.exports.jsx(n.a,{href:"https://github.com/go-chi/chi",children:"Chi"}),`, which
comes with some really nice middleware.`]}),`
`,s.exports.jsx(n.p,{children:`We create a method to decode each request, i.e. read all the input paramaters; and a single method
to encode the each response, in which we also add some error handling.`}),`
`,s.exports.jsx(n.pre,{className:"language-go",children:s.exports.jsxs(n.code,{className:"language-go",children:[s.exports.jsx(n.span,{className:"token comment",children:"// transport.go"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"package"}),` todo

`,s.exports.jsx(n.span,{className:"token keyword",children:"import"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"context"'}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"encoding/json"'}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"errors"'}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"net/http"'}),`

	`,s.exports.jsx(n.span,{className:"token string",children:'"github.com/go-chi/render"'}),`

	`,s.exports.jsx(n.span,{className:"token string",children:'"github.com/go-chi/chi"'}),`
	chiMiddleware `,s.exports.jsx(n.span,{className:"token string",children:'"github.com/go-chi/chi/middleware"'}),`
	httptransport `,s.exports.jsx(n.span,{className:"token string",children:'"github.com/go-kit/kit/transport/http"'}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// ErrMissingParam is thrown when an http request is missing a URL Parameter"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"var"})," ErrMissingParam ",s.exports.jsx(n.span,{className:"token operator",children:"="})," errors",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"New"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"Missing parameter"'}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

`,s.exports.jsx(n.span,{className:"token comment",children:"// MakeHTTPHandler creates http transport layer for the Todo service"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"MakeHTTPHandler"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"endpoints TodoEndpoints",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Handler ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`

	options `,s.exports.jsx(n.span,{className:"token operator",children:":="})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"["}),s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),"httptransport",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ServerOption",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		httptransport`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"ServerErrorEncoder"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"encodeError",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

	r `,s.exports.jsx(n.span,{className:"token operator",children:":="})," chi",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"NewRouter"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	r`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Use"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"chiMiddleware",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Logger",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	r`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Use"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"chiMiddleware",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"StripSlashes",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	r`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Use"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"chiMiddleware",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"DefaultCompress",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	todoRouter `,s.exports.jsx(n.span,{className:"token operator",children:":="})," chi",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"NewRouter"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	todoRouter`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Get"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"/"'}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," httptransport",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"NewServer"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
		endpoints`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"GetAllForUserEndPoint",s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		decodeGetRequest`,s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		encodeResponse`,s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		options`,s.exports.jsx(n.span,{className:"token operator",children:"..."}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ServeHTTP",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	todoRouter`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Get"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"/{id}"'}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," httptransport",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"NewServer"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
		endpoints`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"GetByIDEndpoint",s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		decodeGetByIDRequest`,s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		encodeResponse`,s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		options`,s.exports.jsx(n.span,{className:"token operator",children:"..."}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ServeHTTP",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	todoRouter`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Post"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"/"'}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," httptransport",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"NewServer"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
		endpoints`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"AddEndpoint",s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		decodeAddRequest`,s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		encodeResponse`,s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		options`,s.exports.jsx(n.span,{className:"token operator",children:"..."}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ServeHTTP",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	todoRouter`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Put"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"/{id}"'}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," httptransport",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"NewServer"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
		endpoints`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"UpdateEndpoint",s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		decodeUpdateRequest`,s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		encodeResponse`,s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		options`,s.exports.jsx(n.span,{className:"token operator",children:"..."}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ServeHTTP",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	todoRouter`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Delete"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"/{id}"'}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," httptransport",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"NewServer"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
		endpoints`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"DeleteEndpoint",s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		decodeDeleteRequest`,s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		encodeResponse`,s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
		options`,s.exports.jsx(n.span,{className:"token operator",children:"..."}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ServeHTTP",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	r`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Mount"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"/todos"'}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," todoRouter",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"}),` r
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"decodeGetRequest"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," r ",s.exports.jsx(n.span,{className:"token operator",children:"*"}),"http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Request",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," err ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," GetAllForUserRequest",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"decodeGetByIDRequest"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," r ",s.exports.jsx(n.span,{className:"token operator",children:"*"}),"http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Request",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," err ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	id `,s.exports.jsx(n.span,{className:"token operator",children:":="})," chi",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"URLParam"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"r",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token string",children:'"id"'}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," id ",s.exports.jsx(n.span,{className:"token operator",children:"=="})," ",s.exports.jsx(n.span,{className:"token string",children:'""'})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` ErrMissingParam
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," GetByIDRequest",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),"id",s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"decodeAddRequest"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," r ",s.exports.jsx(n.span,{className:"token operator",children:"*"}),"http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Request",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," err ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"var"}),` todo Todo
	err `,s.exports.jsx(n.span,{className:"token operator",children:"="})," render",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Decode"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"r",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token operator",children:"&"}),"todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," err ",s.exports.jsx(n.span,{className:"token operator",children:"!="})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," AddRequest",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),"todo",s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"decodeUpdateRequest"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," r ",s.exports.jsx(n.span,{className:"token operator",children:"*"}),"http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Request",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," err ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	id `,s.exports.jsx(n.span,{className:"token operator",children:":="})," chi",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"URLParam"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"r",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token string",children:'"id"'}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," id ",s.exports.jsx(n.span,{className:"token operator",children:"=="})," ",s.exports.jsx(n.span,{className:"token string",children:'""'})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` ErrMissingParam
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"var"}),` todo Todo
	err `,s.exports.jsx(n.span,{className:"token operator",children:"="})," render",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Decode"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"r",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token operator",children:"&"}),"todo",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," err ",s.exports.jsx(n.span,{className:"token operator",children:"!="})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," UpdateRequest",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),"id",s.exports.jsx(n.span,{className:"token punctuation",children:","})," todo",s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"decodeDeleteRequest"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," r ",s.exports.jsx(n.span,{className:"token operator",children:"*"}),"http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Request",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"request ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," err ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	id `,s.exports.jsx(n.span,{className:"token operator",children:":="})," chi",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"URLParam"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"r",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token string",children:'"id"'}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," id ",s.exports.jsx(n.span,{className:"token operator",children:"=="})," ",s.exports.jsx(n.span,{className:"token string",children:'""'})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` ErrMissingParam
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," DeleteRequest",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),"id",s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),` err
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"encodeResponse"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," w http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ResponseWriter",s.exports.jsx(n.span,{className:"token punctuation",children:","})," response ",s.exports.jsx(n.span,{className:"token keyword",children:"interface"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token builtin",children:"error"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," err",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ok ",s.exports.jsx(n.span,{className:"token operator",children:":="})," response",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:";"})," ok ",s.exports.jsx(n.span,{className:"token operator",children:"&&"})," err ",s.exports.jsx(n.span,{className:"token operator",children:"!="})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token function",children:"encodeError"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"ctx",s.exports.jsx(n.span,{className:"token punctuation",children:","})," err",s.exports.jsx(n.span,{className:"token punctuation",children:","})," w",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
	w`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Header"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Set"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"Content-Type"'}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token string",children:'"application/json; charset=utf-8"'}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," json",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"NewEncoder"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"w",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Encode"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"response",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"encodeError"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token boolean",children:"_"})," context",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"Context",s.exports.jsx(n.span,{className:"token punctuation",children:","})," err ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," w http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),"ResponseWriter",s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," err ",s.exports.jsx(n.span,{className:"token operator",children:"=="})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token function",children:"panic"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"encodeError with nil error"'}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
	w`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Header"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Set"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'"Content-Type"'}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," ",s.exports.jsx(n.span,{className:"token string",children:'"application/json; charset=utf-8"'}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	w`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"WriteHeader"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token function",children:"codeFrom"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"err",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	json`,s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"NewEncoder"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"w",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Encode"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token keyword",children:"map"}),s.exports.jsx(n.span,{className:"token punctuation",children:"["}),s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:"]"}),s.exports.jsx(n.span,{className:"token builtin",children:"string"}),s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token string",children:'"error"'}),s.exports.jsx(n.span,{className:"token punctuation",children:":"})," err",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"Error"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:","}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"codeFrom"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"err ",s.exports.jsx(n.span,{className:"token builtin",children:"error"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token builtin",children:"int"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"switch"})," err ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"case"})," ErrNotFound",s.exports.jsx(n.span,{className:"token punctuation",children:":"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),`StatusNotFound
	`,s.exports.jsx(n.span,{className:"token keyword",children:"case"})," ErrInconsistentIDs",s.exports.jsx(n.span,{className:"token punctuation",children:","})," ErrMissingParam",s.exports.jsx(n.span,{className:"token punctuation",children:":"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),`StatusBadRequest
	`,s.exports.jsx(n.span,{className:"token keyword",children:"default"}),s.exports.jsx(n.span,{className:"token punctuation",children:":"}),`
		`,s.exports.jsx(n.span,{className:"token keyword",children:"return"})," http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),`StatusInternalServerError
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`]})}),`
`,s.exports.jsx(n.h3,{children:"Main"}),`
`,s.exports.jsxs(n.p,{children:["Finally our ",s.exports.jsx(n.code,{children:"main.go"}),` is responsible for instantiating everything and starting our Http server. You
can see the hexagonal architecture in the way we instantiate an inner layer and pass them as the
input into the immediately outer layer.`]}),`
`,s.exports.jsx(n.p,{children:"Below we create our service, our endpoints and start our transport layer."}),`
`,s.exports.jsx(n.pre,{className:"language-go",children:s.exports.jsxs(n.code,{className:"language-go",children:[s.exports.jsx(n.span,{className:"token comment",children:"// main.go"}),`
`,s.exports.jsx(n.span,{className:"token keyword",children:"package"}),` main

`,s.exports.jsx(n.span,{className:"token keyword",children:"import"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"("}),`
	`,s.exports.jsx(n.span,{className:"token string",children:'"net/http"'}),`

	`,s.exports.jsx(n.span,{className:"token string",children:'"github.com/sinnott74/TodoService/internal/todo"'}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

`,s.exports.jsx(n.span,{className:"token keyword",children:"func"})," ",s.exports.jsx(n.span,{className:"token function",children:"main"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`

	service `,s.exports.jsx(n.span,{className:"token operator",children:":="})," todo",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"NewInmemTodoService"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	endpoints `,s.exports.jsx(n.span,{className:"token operator",children:":="})," todo",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"MakeTodoEndpoints"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"service",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`

	err `,s.exports.jsx(n.span,{className:"token operator",children:":="})," http",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"ListenAndServe"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),s.exports.jsx(n.span,{className:"token string",children:'":8000"'}),s.exports.jsx(n.span,{className:"token punctuation",children:","})," todo",s.exports.jsx(n.span,{className:"token punctuation",children:"."}),s.exports.jsx(n.span,{className:"token function",children:"MakeHTTPHandler"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"endpoints",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token keyword",children:"if"})," err ",s.exports.jsx(n.span,{className:"token operator",children:"!="})," ",s.exports.jsx(n.span,{className:"token boolean",children:"nil"})," ",s.exports.jsx(n.span,{className:"token punctuation",children:"{"}),`
		`,s.exports.jsx(n.span,{className:"token function",children:"panic"}),s.exports.jsx(n.span,{className:"token punctuation",children:"("}),"err",s.exports.jsx(n.span,{className:"token punctuation",children:")"}),`
	`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`
`,s.exports.jsx(n.span,{className:"token punctuation",children:"}"}),`

`]})}),`
`,s.exports.jsxs(n.p,{children:["Running ",s.exports.jsx(n.code,{children:"go run main.go"})," will start our Todo service on port 8000."]})]})}}export{l as author,m as created,h as date,k as default,u as id,x as imageurl,d as tags,i as title};
